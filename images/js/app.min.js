function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a}function arrayRand(a){var b=a[Math.floor(Math.random()*a.length)];return b}function init(){}var width=$(window).width(),height=$(window).height(),tablet=1025,index=1,ySpeed,elemW,startPos,rotationStart,rotationEnd,controller,parallax,$slidecontainer,$body,$intro,$mouse_nav,mobile=!1;$(function(){var a={init:function(){$(window).resize(function(b){a.sizeSet()}),$(document).ready(function(b){$root="/",$body=b("body"),$intro=b(".intro"),$slidecontainer=b(".content .inner"),$projects=b(".project"),$categories=b("ul .category"),$mouse_nav=b(".mouse_nav"),a.sizeSet();if(a.getParameters("filter")){var c=a.getParameters("filter"),d=b('.category[data-filter="'+c+'"]');a.filter(c,d)}History.Adapter.bind(window,"statechange",function(){var c=History.getState();console.log(c);var d=c.data;if("page"==d.type)$slidecontainer.fadeOut(300,function(){a.loadContent(c.url+"/ajax",$slidecontainer)}),b(".overlay").addClass("hidden");else if("drawings"==d.type)$slidecontainer.fadeOut(300,function(){a.loadContent(c.url+"/ajax",$slidecontainer)}),b(".overlay").removeClass("hidden");else if("filter"==d.type){var e=d.filter,f=b('.category[data-filter="'+e+'"]');a.filter(e,f)}else $body.removeClass("page"),b(".overlay").addClass("hidden")}),b("body").on("click","[data-target]",function(c){if(width>=tablet){if($el=b(this),$parent=$el.parent(),c.preventDefault(),"index"==$el.data("target"))return void a.goIndex();if("drawings"==$el.data("target"))return void History.pushState({type:"drawings"},"JÃ©rÃ©my VittÃ© | "+$el.data("title"),$el.attr("href"));$parent.hasClass("hidden")?a.goIndex():($projects.removeClass("active"),$parent.is(".project")&&$parent.addClass("active"),History.pushState({type:"page"},"JÃ©rÃ©my VittÃ© | "+$el.data("title"),$el.attr("href")))}}),b(".category[data-filter]").bind("click",function(a){if(width>=tablet){$el=b(this);var c=window.location.href.split(/[?#]/)[0],d=$el.data("filter");a.preventDefault(),History.pushState({type:"filter",filter:d},document.getElementsByTagName("title")[0].innerHTML,c+"?filter="+d)}}),b("body").on("click",".back-btn, .overlay",function(b){width>=tablet&&(b.preventDefault(),a.goIndex())}),b(".project [data-target]").hover(function(){width>=tablet&&(b(this).parent(".project").hasClass("hidden")||$mouse_nav.html(b(this).data("title")))},function(){$mouse_nav.html("")}),b(".wrap").click(function(c){b(c.target).is(".wrap")&&a.goIndex()}),b(document).keyup(function(b){27===b.keyCode&&a.goIndex()}),width>=tablet&&(b(document).scrollScope(),a.scrollEffect(),a.mouseNav(),b(window).scroll(function(c){0==b(window).scrollTop()&&$body.hasClass("page")&&a.goIndex()}),b("body").on("click",".offset",function(a){a.preventDefault(),b("body,html").animate({scrollTop:height/2},1e3)})),b(window).load(function(){lazySizes.init(),b(".loader").fadeOut(300)})})},getParameters:function(a){var b=null,c=[];return location.search.substr(1).split("&").forEach(function(d){c=d.split("="),c[0]===a&&(b=decodeURIComponent(c[1]))}),b},filter:function(a,b){"all"==a?($categories.removeClass("active"),$projects.removeClass("hidden")):($categories.removeClass("active"),b.addClass("active"),$projects.removeClass("hidden"),$targets=$('.project:not([data-filter="'+a+'"])').addClass("hidden"))},sizeSet:function(){width=$(window).width(),height=$(window).height(),width>=tablet?(s=width/4,$projects.css({width:s-4,height:s-4}),mobile&&location.reload()):(mobile=!0,$projects.css({width:"",height:""}))},mouseNav:function(){$(window).mousemove(function(a){posX=a.pageX,posY=a.pageY,posX<width/4&&$body.hasClass("page")||posX<width/2&&!$body.hasClass("page")?$(".mouse_nav").css({top:posY+"px",left:posX+20+"px"}):$(".mouse_nav").css({top:posY+"px",left:posX-$mouse_nav.outerWidth()-20+"px"})})},scrollEffect:function(){controller=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onLeave"}}),parallax=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter"}});for(var b=$("#main_menu").css("left"),c=(new TimelineMax).to("#main_menu",0,{x:"-100%",left:"0"}).to("#about",0,{x:"-100%",left:"0"}).to("#main_title",.5,{opacity:"1"}).to("#main_title",.5,{opacity:"0"}).to("#main_menu",.3,{x:"0%",left:b},"-=0.3").to("#about",.3,{x:"0%",left:b},"-=0.3"),d=(new ScrollMagic.Scene({triggerElement:".offset",duration:"100%"}).setTween(c).addTo(controller),document.querySelectorAll(".regular")),e=document.querySelectorAll(".important"),f=0;f<d.length;f++)a.placeElem(d[f],!1);for(var f=0;f<e.length;f++)a.placeElem(e[f],!0)},placeElem:function(a,b){startPos=index%2==0?rand(0,50):rand(50,100),b?(elemW=a.getAttribute("data-ratio")>1?100:rand(85,93),rotationStart=rand(-10,10),rotationEnd=rand(-10,10),ySpeed=startPos+rand(-30,50)+"%"):(elemW=rand(60,70),rotationStart=rand(-40,40),rotationEnd=rand(-10,10),ySpeed=startPos+rand(-120,0)+"%");var c=100-elemW;TweenLite.to(a,0,{width:elemW+"%",y:startPos+"%",x:rand(0,c)+"%",rotation:rotationStart,force3D:!0}),new ScrollMagic.Scene({triggerElement:a,duration:rand(1.5,3)*height+"px"}).setTween(a,{y:ySpeed,rotation:rotationEnd,force3D:!0}).addTo(parallax),index++},goIndex:function(){$projects.removeClass("active"),History.pushState({type:"index"},"JÃ©rÃ©my VittÃ©",window.location.origin+$root)},loadContent:function(a,b){$slidecontainer.scrollTop(0),$.ajax({url:a,success:function(a){$(b).html(a),$body.addClass("page"),$slidecontainer.fadeIn(300)}})},deferImages:function(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)a[b].getAttribute("data-src")&&a[b].setAttribute("src",a[b].getAttribute("data-src"))}};a.init()}),init();
//# sourceMappingURL=app.min.js.map